<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="I recently had to explain the formulae for calculating the number of combinations and permutations, when selecting \( r $\) items out of a pool of \( n\). In case you&#39;re ever in the same boat, ...">
        <meta name="keywords" content="combinations, combinatorics, factorial, julia, permutations, python">
        <link rel="icon" href="http://0x7df.io/favicon.ico">

        <title>Combinations and permutations - 0x7df</title>

        <!-- Stylesheets -->
        <link href="http://0x7df.io/theme/css/all.min.css" rel="stylesheet">
        <!-- /Stylesheets -->

        <!-- RSS Feeds -->
        <link href="http://0x7df.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="0x7df Full Atom Feed" />
        <link href="http://0x7df.io/feeds/maths.atom.xml" type="application/atom+xml" rel="alternate" title="0x7df Categories Atom Feed" />
        <!-- /RSS Feeds -->

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->



    </head>

    <body>

        <!-- Header -->
    <div class="header-container gradient">

            <!-- Static navbar -->
            <div class="container">
                <div class="header-nav">
                    <div class="header-logo">
                        <a class="pull-left" href="http://0x7df.io/"><img class="mr20" src="http://0x7df.io/images/0x7df_60x60.png" alt="logo">0x7df</a>
                    </div>
                    <div class="nav pull-right">
                                <a href="http://0x7df.io">Home</a>
                                <a href="http://0x7df.io/">Blog Home</a>
                                <a href="http://0x7df.io/categories.html">Categories</a>
                            <a  href="http://0x7df.io/pages/0x7df-application.html">0x7df application</a>
                            <a  href="http://0x7df.io/pages/about.html">About</a>
                    </div>
                </div>
            </div>
            <!-- /Static navbar -->

            <!-- Header -->
    <!-- Header -->
    <div class="container header-wrapper">
        <div class="row">
              <div class="col-lg-12">
                  <div class="header-content">
                      <h1 class="header-title">Combinations and permutations</h1>
                      <p class="header-date">By <a href="http://0x7df.io/author/0x7df.html">0x7df</a>, Fri 13 March 2015, in category <a href="http://0x7df.io/category/maths.html">Maths</a></p>
                      <div class="header-underline"></div>
                      <div class="clearfix"></div>
                      <p class="pull-right header-tags">
                          <span class="glyphicon glyphicon-tags mr5" aria-hidden="true"></span>
<a href="http://0x7df.io/tag/combinations.html">combinations</a>, <a href="http://0x7df.io/tag/combinatorics.html">combinatorics</a>, <a href="http://0x7df.io/tag/factorial.html">factorial</a>, <a href="http://0x7df.io/tag/julia.html">julia</a>, <a href="http://0x7df.io/tag/permutations.html">permutations</a>, <a href="http://0x7df.io/tag/python.html">python</a>                      </p>
                  </div>
              </div>
        </div>
    </div>
    <!-- /Header -->
            <!-- /Header -->

        </div>
        <!-- /Header -->


        <!-- Content -->
    <div class="container content">
        <p><a href="https://0x7df.files.wordpress.com/2015/02/abstract-balls-blue-200.png"><img alt="abstract-balls-blue-200" src="https://0x7df.files.wordpress.com/2015/02/abstract-balls-blue-200.png" /></a>I
recently had to explain the formulae for calculating the number of
combinations and permutations, when selecting <span class="math">\( r $\)</span>
items out of a pool of <span class="math">\( n\)</span>. In case you're ever
in the same boat, here's a refresher. There are four scenarios:</p>
<table>
<tbody>
<tr>
<td>
</td>
<td>
<span style="color:#333399;">Combinations</span><span
style="color:#333399;">(order doesn't matter):</span>

</td>
<td>
<span style="color:#333399;">Permutations</span> <span
style="color:#333399;">(order does matter):</span>

</td>
</tr>
<tr>
<td>
<span style="color:#333399;">Selected items are replaced:</span>

</td>
<td align="center">
$$ \frac{\left(n + r - 1\right)!}{ r!\left(n - 1\right)!}
$$

</td>
<td align="center">
$$ n^r $$

</td>
</tr>
<tr>
<td>
<span style="color:#333399;">Selected items are not replaced:</span>

</td>
<td align="center">
$$ \frac{n!}{r!\left(n-r\right)!} $$

</td>
<td align="center">
$$ \frac{n!}{\left(n-r\right)!} $$

</td>
</tr>
</tbody>
</table>

<h3>The factorial function</h3>
<p>The exclamation mark represents <a href="http://mathworld.wolfram.com/Factorial.html">the
<em>factorial</em></a>:</p>
<div class="math">$$ x! = x \times \left(x-1\right) \times \left(x-2\right)
\times \ldots \times 2 \times 1 $$</div>
<p>For example:</p>
<div class="math">$$ 5! = 5 \times 4 \times 3 \times 2 \times 1 = 120
$$</div>
<p>You can invoke it in <a href="https://www.python.org/">Python</a> like this:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">python</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">math</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">math</span><span class="o">.</span><span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="mi">120</span>
</pre></div>


<p>or perhaps, if you're going to use it a lot:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">python</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">factorial</span> <span class="k">as</span> <span class="n">fac</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">fac</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="mi">24</span>
</pre></div>


<p>In <a href="http://julialang.org/">Julia</a>:</p>
<div class="highlight"><pre><span class="nv">$ </span>julia
julia&gt; factorial<span class="o">(</span>7<span class="o">)</span>
5040
</pre></div>


<p>One last thing to know about the factorial function, is that <span class="math">\( 0! = 1\)</span>.</p>
<h3>Permutations vs. combinations</h3>
<p>To get the formula right, there are two choices to make. First, we have
to decide whether or not the order that items are selected in matters to
us. The various different arrangements of some group of items are called
<em>permutations</em> when the order matters; e.g. if the arrangement (1, 2, 3)
is considered different from (2, 3, 1). If the order doesn't matter -
e.g. if the arrangements (a, b, c), (b, c, a), (b, a, c), etc., are
considered to be the same - then the arrangements are referred to as
<em>combinations</em>.  This depends on the application.</p>
<h3>With vs. without replacement</h3>
<p>The second thing we have to consider is whether or not each item that
gets selected is put back into the pool before the next selection is
made. In a <a href="http://en.wikipedia.org/wiki/Lottery">lottery</a>, when a ball
is selected, it can't get selected again - this scenario is selection
<em>without replacement</em>. For a group of kids playing <a href="http://en.wikipedia.org/wiki/Hot_potato_%28game%29">pass the
parcel</a>, as far as
they're concerned the same individual can get selected any number of
times - you stay in the game even after you've been selected and you
hope you might get chosen again. So this is selection <em>with
replacement</em>. (NB in practice that's not a very sensible way to play
pass the parcel if you want an easy time, so adults running the game are
more likely to see it as selection <em>without replacement</em>...)</p>
<p>This leads to our four scenarios. Now let's work out the equations.</p>
<h3>1. Permutations without replacement</h3>
<p>You have <span class="math">\( n\)</span> distinct items and you have to
select <span class="math">\( r\)</span>. The order doesn't matter, and the
items aren't replaced in the pool once selected. There are <span class="math">\( n\)</span>
possibilities for the first item, but because there is
no replacement, there are only <span class="math">\( n-1 $\)</span>
possibilities for the second item, then only <span class="math">\( n-2\)</span>
possibilities for the third, etc. Since, to get the
total number, we're going to multiply these together, we start to see
that the formula for the total number of combinations, say <span class="math">\( M\)</span>,
is going to look something like:</p>
<div class="math">$$ M = n \times \left(n-1\right) \times \left(n-2\right)
\times \ldots $$</div>
<p>If we continued this series of terms right to the end,  down to 1, then
that would be the same as taking the factorial of <span class="math">\( n\)</span>.
However, the number of terms we need to multiply
together is the same as the number of selections in whatever game we're
playing. We need to remember we're only selecting <span class="math">\( r\)</span>
items, so there are going to be only <span class="math">\( r\)</span>
terms:</p>
<div class="math">$$ M = n \times \left(n-1\right) \times \left(n-2\right)
\times \ldots \times \left(n-r+1\right) $$</div>
<p>So just taking the factorial of <span class="math">\( n\)</span> will only
give the right answer if we want to select all the items eventually,
i.e. if <span class="math">\( r = n\)</span>. In general we need to truncate
the series after <span class="math">\( r\)</span> terms. How do we do this?
The answer is going to be <span class="math">\( n!/\left(n-r\right)!\)</span>,
and this will be easiest to see using an example. Let
<span class="math">\($ n = 6\)</span> and <span class="math">\( r = 3\)</span>. We
can write the answer out the long way: <span class="math">\( M = 6 \times 5 \times 4
and compare this with the formula for $ n!\)</span>:</p>
<div class="math">$$ n! = 6 \times 5 \times 4 \times 3 \times 2 \times 1
$$</div>
<p>Clearly, <span class="math">\( M = n! /\left(3 \times 2 \times 1 \right)
$, which of course is the same as $ M = n! / 3!\)</span>.
After working out another couple of simple examples
like this, you will see that the denominator always needs to be
<span class="math">\( \left(n-r\right)!\)</span>, to cancel out the last
<span class="math">\( \left(n-r\right)!\)</span> terms of the factorial of <span class="math">\( n
$, leaving just the first $ r $\)</span>
terms that we need. Hence:</p>
<div class="math">$$ M = \frac{n!}{\left(n-r\right)!} $$</div>
<h3>2. Permutations with replacement</h3>
<p>The difference here from the last example is that each time we make a
selection, we replace the item afterwards. Every selection is made from
the same original pool, rather than from a gradually decreasing pool. So
in this case the formula is going to look something like:</p>
<div class="math">$$ M = n \times n \times n \times \ldots $$</div>
<p>The logic above about there only being <span class="math">\( r\)</span> terms
is exactly the same here, so we end up with:</p>
<div class="math">$$ M = n^r $$</div>
<p>Simple!</p>
<h3>3. Combinations without replacement</h3>
<p>Now we take the first scenario - permutations without replacement - and
adapt it to the scenario where we don't distinguish between different
orderings of the selected items. Clearly, we're going to have reduce the
number - there will be fewer combinations than there are permutations.
Let's assume <span class="math">\( n = 5\)</span> and <span class="math">\( r = 3\)</span>.
Imagine the items are numbered balls like in a
lottery, and imagine the selected balls are (1, 3, 4). If these were
your numbers, you'd win no matter what order they came out in, so the
permutations of the <span class="math">\( r\)</span> selected items - (1, 3,
4), (1, 4, 3), (3, 1, 4), (3, 4, 1), (4, 1, 3) and (4, 3, 1) - are the
same, and should be considered just one distinct arrangement. Of course,
we already know that there are <span class="math">\( r!\)</span> permutations
of <span class="math">\( r\)</span> selected items, so if we care about the
order of the selected items, then there are going to be <span class="math">\( r!\)</span>
more possibilities than if we don't. So, all we have to
do to get the number of combinations is reduce the number of
permutations by a factor of <span class="math">\( r!\)</span>. Hence:</p>
<div class="math">$$ M = \frac{n!}{r!\left(n-r\right)!} $$</div>
<h3>4. Combinations with replacement</h3>
<p>This scenario is slightly more complicated. <em>Without</em> replacement, to
get from the number of permutations to the number of combinations, we
just reduced by a factor of <span class="math">\( r!\)</span>. You might
therefore think that the answer here is going to be the number of
permutations <em>with</em> replacement, similarly reduced by a factor of
<span class="math">\($ r!\)</span>; but it isn't. Let's take a simple example:
a pool of three numbers, and selection of two items. The permutations
without replacement are:</p>
<p>(1,2) <span style="color:#ff0000;">(2,1)</span> (1,3) <span
style="color:#ff0000;">(3,1)</span> (2,3) <span
style="color:#ff0000;">(3,2)</span></p>
<p>and the additional ones if replacement is allowed are:</p>
<p>(1,1) (2,2) (3,3)</p>
<p>The permutations highlighted in red are the ones you'd get rid of if you
were interested only in combinations. Notice that there aren't any red
ones in the second batch - the "extra" possibilities that arise when
replacement is allowed are the same for permutations as for combinations
(in this special case of selecting two items). When you generalise this
idea to larger numbers, you do end up with some red items in the second
batch, but not as high a proportion as in the first batch. So we have to
reduce the second batch by some different factor, not <span class="math">\( r!\)</span>.</p>
<p>This shows us why reducing the total number of permutations by
<span class="math">\( r!\)</span> doesn't work with replacement, but it doesn't
actually help us do the calculation, because we can't easily work out
how big the second batch is, nor what factor to reduce it by. However,
what if we pretend that, whenever we get repetition due to the items
being replaced, an item being selected a second time is actually a new
item? So instead of (1,1) we could perhaps write (1,1′), with the prime
on the second 1 indicating our pretense that it's a different item. If
we had (1,1,2,1) for an <span class="math">\( r = 4\)</span> trial, we'd call
it (1,1′,2,1′′), indicating that the three instances where 1 was
selected should all be treated as if they were different items. We're
now back in the realm of permutations without replacement, for which the
formula is <span class="math">\( m! /r!\left(m-r\right)!\)</span>, where now
we're using <span class="math">\( m\)</span>, for the "expanded" number of
items to choose from as a consequence of replacement being allowed,
rather than <span class="math">\( n\)</span>, the true number of distinct
items. Now we just need to work out <span class="math">\( m\)</span>. It turns
out that:</p>
<div class="math">$$ m = n + r - 1 $$</div>
<p>That is, selecting <em>with</em> replacement from a pool of <span class="math">\( n\)</span>
is like selecting <em>without</em> replacement from a pool of
</p>
<div class="math">$$ n + r - 1$. There are $ r -1
extra possibilities to select from, because once we
have selected the first item, the remaining $ r - 1$
items could be (in reality) the same item every time,
but we are pretending that they are different. Hence, substituting for
$$</div>
<p> m$:</p>
<div class="math">$$ m! /\left(m - r\right)! = \left(n + r - 1\right)! /\left(n
- 1\right)! $$</div>
<p>This gives us the number of permutations, which we <em>can</em> now reduce by
<span class="math">\($ r!\)</span> to get the number of combinations. Our final
formula is therefore:</p>
<div class="math">$$ M = \frac{\left(n + r - 1\right)!}{ r!\left(n - 1\right)!}
$$</div>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>


        
    </div>
        <!-- /Content --> 

        <!-- Footer -->
        <div class="footer gradient-2">
            <div class="container footer-container ">
                <div class="row">
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                        <div class="footer-title">Sitemap</div>
                        <ul class="list-unstyled">
                            <li><a href="http://0x7df.io/archives.html">Archives</a></li>
                            <li><a href="http://0x7df.io/tags.html">Tags</a></li>
                            <li><a href="http://0x7df.io/authors.html">Authors</a></li>
                            <li><a href="http://0x7df.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">Atom Feed</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                        <div class="footer-title">Social</div>
                        <ul class="list-unstyled">
                            <li><a href="https://twitter.com/@0x7df" target="_blank">Twitter</a></li>
                            <li><a href="https://github.com/0x7df" target="_blank">GitHub</a></li>
                            <li><a href="https://www.facebook.com/0x7df" target="_blank">Facebook</a></li>
                            <li><a href="https://stackoverflow.com/users/4802778" target="_blank">StackOverflow</a></li>
                            <li><a href="http://www.freecodecamp.com/0x7df" target="_blank">FreeCodeCamp</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                        <div class="footer-title">Links</div>
                        <ul class="list-unstyled">
                            <li><a href="http://getpelican.com/" target="_blank">Pelican</a></li>
                            <li><a href="http://python.org/" target="_blank">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/" target="_blank">Jinja2</a></li>
                            <li><a href="https://github.com/barrysteyn/pelican_plugin-render_math" target="_blank">Maths plugin</a></li>
                            <li><a href="https://github.com/molivier/nest" target="_blank">Nest theme</a></li>
                            <li><a href="" target="_blank"></a></li>
                            <li><a href="" target="_blank"></a></li>
                            <li><a href="" target="_blank"></a></li>
                        </ul>
                    </div> 
                    <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
                        <p class="pull-right text-right">
                            <small><em>Proudly powered by <a href="http://docs.getpelican.com/" target="_blank">pelican</a></em></small><br/>
                            <small><em>Theme and code by <a href="https://github.com/molivier" target="_blank">molivier</a></em></small><br/>
                            <small>&copy; 0x7df 2015</small>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Footer -->
    </body>
</html>