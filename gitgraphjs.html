<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="The documentation is at https://gitgraphjs.com. Installing GitGraph.js The documentation recommends installation via: npm install @gitgraph/js where @gitgraph (as opposed to just gitgraph) is v2...">
        <meta name="keywords" content="">
        <link rel="icon" href="https://0x7df.github.io/favicon.ico">

        <title>GitGraph.js - 0x7df</title>

        <!-- Stylesheets -->
        <link href="https://0x7df.github.io/theme/css/all.min.css" rel="stylesheet">
        <!-- /Stylesheets -->

        <!-- RSS Feeds -->
        <link href="https://0x7df.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="0x7df Full Atom Feed" />
        <!-- /RSS Feeds -->

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->



    </head>

    <body>

        <!-- Header -->
    <div class="header-container gradient">

            <!-- Static navbar -->
            <div class="container">
                <div class="header-nav">
                    <div class="header-logo">
                        <a class="pull-left" href="https://0x7df.github.io/"><img class="mr20" src="https://0x7df.github.io/images/0x7df_60x60.png" alt="logo">0x7df</a>
                    </div>
                    <div class="nav pull-right">
                                <a href="https://0x7df.github.io/">Blog Home</a>
                                <a href="http://0x7df.io">Site Home</a>
                                <a href="https://0x7df.github.io/categories.html">Categories</a>
                            <a  href="https://0x7df.github.io/pages/0x7df-application.html">0x7df application</a>
                            <a  href="https://0x7df.github.io/pages/about.html">About</a>
                    </div>
                </div>
            </div>
            <!-- /Static navbar -->

            <!-- Header -->
    <!-- Header -->
    <div class="container header-wrapper">
        <div class="row">
              <div class="col-lg-12">
                  <div class="header-content">
                      <h1 class="header-title">GitGraph.js</h1>
                      <p class="header-date">By <a href="https://0x7df.github.io/author/0x7df.html">0x7df</a>, Mon 29 July 2019, modified Mon 29 July 2019, in category <a href="https://0x7df.github.io/category/misc.html">Misc</a></p>
                      <div class="header-underline"></div>
                      <div class="clearfix"></div>
                      <p class="pull-right header-tags">
                          <span class="glyphicon glyphicon-tags mr5" aria-hidden="true"></span>
                      </p>
                  </div>
              </div>
        </div>
    </div>
    <!-- /Header -->
            <!-- /Header -->

        </div>
        <!-- /Header -->


        <!-- Content -->
    <div class="container content">
        <p>The documentation is at <a href="https://gitgraphjs.com">https://gitgraphjs.com</a>.</p>
<h2>Installing GitGraph.js</h2>
<p>The documentation recommends installation via:</p>
<div class="highlight"><pre><span></span><code>npm install @gitgraph/js
</code></pre></div>

<p>where <code>@gitgraph</code> (as opposed to just <code>gitgraph</code>) is v2 of the library.</p>
<p>However, usage directly in a web page via a CDN is also possible, to bypass
installation.</p>
<h2>Basic usage</h2>
<p>The basic structure of the web page is given as:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="c">&lt;!-- Load the JS file --&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdn.jsdelivr.net/npm/@gitgraph/js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="c">&lt;!-- DOM element in which we&#39;ll mount our graph --&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;graph-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="c">&lt;!-- Use the `GitgraphJS` global variable to create your graph --&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="c1">// Get the graph container HTML element.</span>
    <span class="kr">const</span> <span class="nx">graphContainer</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;graph-container&quot;</span><span class="p">);</span>

    <span class="c1">// Instantiate the graph.</span>
    <span class="kr">const</span> <span class="nx">gitgraph</span> <span class="o">=</span> <span class="nx">GitgraphJS</span><span class="p">.</span><span class="nx">createGitgraph</span><span class="p">(</span><span class="nx">graphContainer</span><span class="p">);</span>

    <span class="c1">// Simulate git commands with Gitgraph API.</span>
    <span class="kr">const</span> <span class="nx">master</span> <span class="o">=</span> <span class="nx">gitgraph</span><span class="p">.</span><span class="nx">branch</span><span class="p">(</span><span class="s2">&quot;master&quot;</span><span class="p">);</span>
    <span class="nx">master</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="s2">&quot;Initial commit&quot;</span><span class="p">);</span>

    <span class="kr">const</span> <span class="nx">develop</span> <span class="o">=</span> <span class="nx">gitgraph</span><span class="p">.</span><span class="nx">branch</span><span class="p">(</span><span class="s2">&quot;develop&quot;</span><span class="p">);</span>
    <span class="nx">develop</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="s2">&quot;Add TypeScript&quot;</span><span class="p">);</span>

    <span class="kr">const</span> <span class="nx">aFeature</span> <span class="o">=</span> <span class="nx">gitgraph</span><span class="p">.</span><span class="nx">branch</span><span class="p">(</span><span class="s2">&quot;a-feature&quot;</span><span class="p">);</span>
    <span class="nx">aFeature</span>
      <span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="s2">&quot;Make it work&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="s2">&quot;Make it right&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="s2">&quot;Make it fast&quot;</span><span class="p">);</span>

    <span class="nx">develop</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">aFeature</span><span class="p">);</span>
    <span class="nx">develop</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="s2">&quot;Prepare v1&quot;</span><span class="p">);</span>

    <span class="nx">master</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">develop</span><span class="p">).</span><span class="nx">tag</span><span class="p">(</span><span class="s2">&quot;v1.0.0&quot;</span><span class="p">);</span>
  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<p>which renders as:</p>
<p><img alt="Basic example of a GitGraph-generated image" src="https://0x7df.github.io/images/GitGraph_basic_example.png"></p>
<p>Note that random commit hashes are generated automatically when the page is
rendered, so when you refresh the page they change.</p>
<h2>Use in presentations rather than on web pages</h2>
<p>For importing into presentations, the simplest way seems to be just to take a
screenshot, which is clunky but still beats drawing the graph by hand in
PowerPoint or Keynote. There's probably a way to capture screenshots
automatically using <a href="https://www.seleniumhq.org">Selenium</a>, which is the way
the Python plotting library <a href="https://bokeh.pydata.org">Bokeh</a> seems to do it.</p>
<p>Another way would be use <a href="https://revealjs.com">reveal.js</a> to generate the whole
presentation and then presumably the GitGraph JavaScript code can be wired into
the presentation directly. Reveal.js supports exporting as PDF if you want the
presentation as a file.</p>
<h2>Reveal.js basic usage</h2>
<p>To create a reveal.js presentation, first get reveal.js itself. For authoring
presentations, <a href="https://github.com/hakimel/reveal.js#basic-setup">only a download is needed</a>:</p>
<div class="highlight"><pre><span></span><code>curl -Lo tmp.tar.gz https://github.com/hakimel/reveal.js/archive/3.8.0.tar.gz
tar xzf tmp.tar.gz <span class="o">&amp;&amp;</span> rm tmp.tar.gz
<span class="nb">cd</span> reveal.js-3.8.0
</code></pre></div>

<p>There is a template <code>index.html</code> which can be viewed directly in a browser:</p>
<div class="highlight"><pre><span></span><code>cp index.html test.html
open test.html <span class="c1"># On a Mac</span>
</code></pre></div>

<p>or served by a web server:</p>
<div class="highlight"><pre><span></span><code>python3 -m http.server <span class="p">&amp;</span>
open http://localhost:8000/test.html
</code></pre></div>

<h2>GitGraph.js code in a Reveal.js presentation</h2>
<p>Getting the GitGraph.js image to render correctly is slightly convoluted, or at
least this way that I hacked around is; there might be better ways.</p>
<p>GitGraph.js uses a named <code>div</code> element:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;graph-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

<p>and then renders the graph in that node of the DOM using some JavaScript:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="kr">const</span> <span class="nx">graphContainer</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;graph-container&quot;</span><span class="p">);</span>
    <span class="c1">// Do stuff with graphContainer...</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>

<p>If you just put the named <code>div</code> element inside one of reveal.js's
<code>&lt;section&gt;...&lt;/section&gt;</code> constructs, which define slides, the graph doesn't
render. This has to be done explicitly.</p>
<p>Reveal provides a <code>data-state</code> attribute that can be added to a <code>section</code>
element, which causes an event to be triggered when the slide in question
comes up. An event listener can be added which listens for the value given to
the <code>data-state</code> attribute, and executes some action upon receiving it. The end
result of this is that some custom code can be executed when the slide in
question comes up. If the GitGraph code is encased inside a named function, the
custom action can be to call this function, and hence render the graph.</p>
<p>Note however that if the <code>data-state</code> attribute is added to the <code>section</code> element that actually
contains the graph, then the layout isn't right. This is because the <code>div</code>
element placement is determined <em>before</em> the graph is rendered, while it is
still empty. To get round this, it is enough to add the <code>data-state</code> attribute
to the <em>first</em> section, to ensure the graph is rendered before the slide
containing it comes up. Then the layout is correct. This will work as long as
the first slide doesn't contain the graph; in which case it might be possible to
add a hidden slide with the <code>data-state</code> attribute as the first slide, but I
didn't look into this.</p>
<p>So we have:</p>
<div class="highlight"><pre><span></span><code><span class="c">&lt;!-- Main slide structure --&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;reveal&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;slides&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">section</span><span class="p">&gt;</span>
            Slide 1
        <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">section</span> <span class="na">data-state</span><span class="o">=</span><span class="s">&quot;gitgraph&quot;</span><span class="p">&gt;</span>
            Slide 2
            <span class="c">&lt;!-- DOM element in which we&#39;ll mount our graph --&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;graph-container1&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>

<p>and then the definition code for the graph we want to render:</p>
<div class="highlight"><pre><span></span><code><span class="c">&lt;!-- Git Graphs --&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="kd">function</span> <span class="nx">drawGit1</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Get the graph container HTML element.</span>
        <span class="kr">const</span> <span class="nx">graphContainer</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;graph-container1&quot;</span><span class="p">);</span>

        <span class="c1">// Instantiate the graph.</span>
        <span class="p">...</span>
    <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>

<p>which is the same as the example code in the GitGraph.js template index.html,
except enclosed in a function definition.</p>
<p>Finally, the initialisation step for the reveal presentation looks like this:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="c1">// Existing initialisation step</span>
    <span class="nx">Reveal</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span>
        <span class="nx">dependencies</span><span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span> <span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;plugin/markdown/marked.js&#39;</span> <span class="p">},</span>
            <span class="p">{</span> <span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;plugin/markdown/markdown.js&#39;</span> <span class="p">},</span>
            <span class="p">{</span> <span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;plugin/notes/notes.js&#39;</span><span class="p">,</span> <span class="nx">async</span><span class="o">:</span> <span class="kc">true</span> <span class="p">},</span>
            <span class="p">{</span> <span class="nx">src</span><span class="o">:</span> <span class="s1">&#39;plugin/highlight/highlight.js&#39;</span><span class="p">,</span> <span class="nx">async</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">});</span>

    <span class="c1">// Add the event listener</span>
    <span class="nx">Reveal</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;gitgraph&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">drawGit1</span><span class="p">();</span>
    <span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>

<p>To add multiple graphs, I just:</p>
<ul>
<li>added the additional containers <code>graph-container2</code>, <code>graph-container3</code>, ..., in the appropriate places in the slides</li>
<li>created corresponding functions <code>drawGit2</code>, <code>drawGit3</code>, ..., in the same
  `<script></li>
</ul>


        <div>
            <h3 id="comments">COMMENTS</h3>
        </div>

        <div id="comment-post">
            <form method="POST" action="https://comment-bot-0x7df.herokuapp.com/v2/entry/0x7df/0x7df.github.io/master/comments">
                <input name="options[redirect]" type="hidden" value="https://0x7df.github.io/gitgraphjs">
                <input name="fields[url]" type="hidden" value="gitgraphjs">
                <div><label>Name: <input name="fields[name]" type="text"></label></div>
                <div><label>E-mail: <input name="fields[email]" type="email"></label></div>
                <div><label>Message: <textarea name="fields[message]"></textarea></label></div>
                <button type="submit">Submit</button>
            </form>
        </div>


    </div>
        <!-- /Content --> 

        <!-- Footer -->
        <div class="footer gradient-2">
            <div class="container footer-container ">
                <div class="row">
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                        <div class="footer-title">Sitemap</div>
                        <ul class="list-unstyled">
                            <li><a href="https://0x7df.github.io/archives.html">Archives</a></li>
                            <li><a href="https://0x7df.github.io/tags.html">Tags</a></li>
                            <li><a href="https://0x7df.github.io/authors.html">Authors</a></li>
                            <li><a href="https://0x7df.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">Atom Feed</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                        <div class="footer-title">Social</div>
                        <ul class="list-unstyled">
                            <li><a href="https://twitter.com/@0x7df" target="_blank">Twitter</a></li>
                            <li><a href="https://github.com/0x7df" target="_blank">GitHub</a></li>
                            <li><a href="https://www.facebook.com/0x7df" target="_blank">Facebook</a></li>
                            <li><a href="https://stackoverflow.com/users/4802778" target="_blank">StackOverflow</a></li>
                            <li><a href="http://www.freecodecamp.com/0x7df" target="_blank">FreeCodeCamp</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                        <div class="footer-title">Links</div>
                        <ul class="list-unstyled">
                            <li><a href="http://getpelican.com/" target="_blank">Pelican</a></li>
                            <li><a href="http://python.org/" target="_blank">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/" target="_blank">Jinja2</a></li>
                            <li><a href="https://github.com/barrysteyn/pelican_plugin-render_math" target="_blank">Maths plugin</a></li>
                            <li><a href="https://github.com/molivier/nest" target="_blank">Nest theme</a></li>
                            <li><a href="" target="_blank"></a></li>
                            <li><a href="" target="_blank"></a></li>
                            <li><a href="" target="_blank"></a></li>
                        </ul>
                    </div> 
                    <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
                        <p class="pull-right text-right">
                            <small><em>Proudly powered by <a href="http://docs.getpelican.com/" target="_blank">pelican</a></em></small><br/>
                            <small><em>Theme and code by <a href="https://github.com/molivier" target="_blank">molivier</a></em></small><br/>
                            <small>&copy; 0x7df 2015</small>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Footer -->
    </body>
</html>